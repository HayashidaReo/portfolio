# 概要

日本拳法の大会で使用される得点板システム。それに加えて、各チームからの選手登録フォーム, フォームで収集した情報をシステムに落とし込み、そのデータを活用して試合の組み合わせを作成。その組み合わせの得点や反則、試合時間のタイマーなどを表示する得点板画面を表示。試合結果の閲覧などの機能を提供する。

---
# 開発背景

友人が日本拳法の大会を開くことになり、既存の得点板は使いにくいとのことから得点板の作成を依頼された。必要な要件をヒアリングし作成。

---
# 主な機能
- インタラクティブなスコアボード操作画面とリアルタイムに連動するスコアボード
- 試合出場チームの申請フォーム
- 申請完了の自動送信メール
- 申請フォームと連携した選手管理画面
- 試合組合せ作成
- 大会運営組織ごとに大会を複数管理可能

---
# 技術選定の理由

## バックエンド (Firebase)
維持費と開発工数を抑えられるため。

## フロントエンド (React(Next.js))
webアプリとしてリリース予定だった。
next.jsに慣れたかった。
当初は一番慣れているflutterで作成をしようと考えていたが、多少経験が浅くてもwebアプリの動作が重いことからreactに変更。

## presentation api
当初は、このapiの存在を知らなかった。そのため、モニター操作画面で操作した得点や反則情報、タイマーの動作状態をfirebaseに保存し、モニター画面で取得し、表示する。という案を考えていた。しかし、リアルタイムな反映が求められるこのアプリにおいて、firebaseでの連携だとラグが生じてしまった。そしてタイマーが止まらないなどの問題も起きた。また、大会会場は電波が悪い環境もあるためできる限り通信は抑える必要があった。そこで、方針を見直し、presentation apiに辿り着いた。
しかし、presentation apiはpc以外の外部モニターが接続されている状態でないとモニター画面を表示することができない。これは開発中やシステムのチェックをするときなどに困ることが想像できた。そこで、presentation apiが使用できないときは　broadcast paiを使用して、別タブにリアルタイムに表示する方法をとった。

---
# このプロジェクトが解決を目指す課題
大会運営の負担を減らすシステムにしたい。（もっと深いヴィジョンを一緒に考えて）
そのために現在製作中の機能に加えて以下も追加していきたい。
- 選手個人の勝敗や得点を集計して個人の戦績をシステム内で確認
- 団体戦やトーナメント戦、リーグ戦など多様な方式に対応（現在は手動で対戦組合せを作成のみ）
- 今はpc一台につき１つのモニターを接続して管理する予定だが、pcだけでなくスマホにも対応して、端末用意の障壁を少なくする。

---
# 技術的なこだわりと工夫
- 依頼された時は、依頼した友人が使うのみでしたが、展望としてこのシステムを日本拳法全体に普及させたいという思いがありました。そこで、組織運営者ごとに大会を開催・管理できるdb設計にしました。また、１つの組織内でも大会を複数開催できるようにしました。そうすることで、１つの大会では試合の組合せを設定し、もう１つの大会ではフォームから受け付けた選手の登録を行うなど並行して複数の大会を管理することが可能になりました。
- 