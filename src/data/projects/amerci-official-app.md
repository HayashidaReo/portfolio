# 概要

アルバイト先の食品・雑貨店「Amerci」の公式アプリを企画・開発しました。店舗オーナーと直接要件定義を行い、FlutterとFirebaseを用いてiOS/Androidアプリを構築。お知らせ配信やポイント機能に加え、店舗の既存レジシステム（VBA）との連携も実現しました。クライアントの課題解決に直接貢献できた、初のBtoCアプリ開発経験です。

---
# 開発背景

顧客との関係を重視する小規模店舗であることと、私自身がより身近なユーザーをターゲットにしたアプリ開発に挑戦したいという思いが合致し、オーナーに提案して開発が始まりました。

---
# 主な機能

* 会員認証 (Firebase Authentication)
* お知らせ配信 (プッシュ通知対応)
* 会員限定の訳あり商品情報
* オリジナルレシピの配信・閲覧
* 買い物で貯まるポイント機能
* ECサイト(BASE)への導線
* 管理者向け画面

---
# 技術選定の理由

## バックエンド (Firebase)
維持費と開発工数を抑えられるため。

## フロントエンド (Flutter)
iOS/Android両対応の必要性からReact Nativeと比較検討。以下の理由でFlutterを選択しました。
1.  バックエンドにFirebaseの採用を決定していたため、同じGoogleのエコシステムに属するから。
2.  JavaScript未経験だったため、言語の学習コストを重視。Dartはモダンな静的型付け言語であり、コードの安全性が高く、Swiftにも似たクリーンな文法であるから。
3.  志望する業界でFlutterの採用事例が増加傾向にあるから。

---
# 課題と解決策

店舗の課題であった**顧客の定着率向上**を目指し、以下の機能を企画・実装しました。

## 1. ポイント機能（提案・実装）

100円につき3円分という高還元率のポイントで再来店を促進。レジでのアプリダウンロードのきっかけ作りにも貢献しました。

## 2. お知らせ配信（提案・実装）

新商品やイベント情報をプッシュ通知で配信し、非アクティブユーザーへもアプローチ。ユーザー体験を考慮し、通知のON/OFF設定も可能にしました。

## 3. 限定コンテンツ（提案整理・実装）

**レシピ:** アプリ利用の付加価値として、スタッフ考案のオリジナルレシピを掲載。UIは主要レシピサイトを参考にし、いいね・コメント機能も実装しました。

**訳あり商品販売:** 賞味期限の近い商品をアプリ会員限定で販売。フードロス削減にも繋がり、ユーザーから高い利用率を得ています。

---
# 担当領域と役割

初めての共同開発として、企画から設計、開発、リリース、運用まで全ての工程を担当しました。

* **要件定義:** オーナーと直接すり合わせを行い、Googleドキュメントで仕様を管理。機能実装の際は、複数の選択肢のメリット・デメリットを提示し、オーナーに意思決定を仰ぐことを徹底しました。
* **開発:** Flutter/Firebaseを用いたアプリ本体と、管理者画面の設計・実装。レジシステムとの連携。
* **マーケティング:** 店内ポスターの作成やSNSでの告知など、アプリの利用促進活動も行いました。

---
# 開発で直面した技術的課題

## 1. プッシュ通知の実装

Firebase Messagingの利用経験がなく、デバイスのトークン管理やApp Store Connectでの設定など、関連知識のキャッチアップに時間を要しました。公式ドキュメントや技術記事を参考に、一つずつ課題をクリアして実装に至りました。

## 2. 新規登録時のローディング問題

レジ前でのアプリ新規登録時に、一部のユーザー環境でローディングが完了しない問題に直面しました。
再現性が低い問題だったため、スタッフに協力を依頼し、発生時の端末情報や状況を記録する体制を構築。収集したデータから、通信速度が遅い環境下で初回のデータ読み込みに失敗していると原因を特定しました。
解決策として、初期処理を軽量化すると同時に、ローディングが長引く場合に案内メッセージを表示するよう改修し、問題を解消しました。

## 3. VBA製レジシステムとのAPI連携

VBAでのJSON解析に制約があったため、FirebaseからのAPIレスポンスを文字列として扱い、正規表現で必要なデータを抽出する方法で連携を実現しました。

---
# 技術的なこだわりと工夫

## 1. UXを意識した動線設計

プッシュ通知からお知らせ詳細へ直接遷移させる、レシピの材料からECサイトの商品ページへリンクするなど、ユーザーがストレスなく目的の情報にたどり着けるよう、アプリ内の動線を細かく設計しました。

## 2. 外部サービスとの連携ハブ

アプリ内に店舗の電話番号、メール、オンラインショップ、SNSへのリンクを集約。Google Maps APIでは、店舗名で検索クエリを渡すことで、地図アプリ上で正確な店舗情報が表示されるように工夫しました。

## 3. 不安定な通信環境を前提としたレジ連携

店舗の不安定な通信環境を前提に、レジとアプリを連携させるための工夫をしました。
API通信を最小限に抑えるため、QRコード自体にユーザーIDと保有ポイント情報を含める方式を採用。しかし、この方式はポイントを容易に改ざんできる課題があったため、対策としてQRコード画面に秒単位で更新される現在時刻を表示し、スタッフが正規のアプリかを目視で確認する運用を取り入れました。
さらに、通信失敗時のリカバリー策として、管理者画面から手動でポイントを付与できる機能も実装し、システムの信頼性を高めました。